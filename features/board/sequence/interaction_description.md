## 필수 정보

### 1. 참여자 (Participants/Actors)

| 참여자 | 설명 | 기술 스택 |
|--------|------|-----------|
| 사용자 (User) | 서비스 이용자 | 브라우저 |
| 프론트엔드 (Frontend) | 웹 클라이언트 | Next.js |
| 백엔드 (Backend) | API 서버 | Spring Boot |
| DB (Database) | 데이터 저장소 | PostgreSQL |

### 2. 시나리오/흐름 설명

- 게시글 좋아요 토글
- 게시글 북마크 토글
- 댓글 좋아요 토글
- 내 북마크 목록 조회

### 3. 메시지 흐름 순서

#### 3-1. 게시글 좋아요

```
1. 사용자 → 프론트엔드: 좋아요 버튼 클릭
2. [조건] 비로그인: 로그인 필요 안내
3. 프론트엔드 → 백엔드: POST /api/v1/posts/{postId}/like
4. 백엔드 → DB: 좋아요 여부 조회
5. [조건] 좋아요 안함:
   - 백엔드 → DB: 좋아요 추가
   - 백엔드 → DB: likeCount 증가
   - 백엔드 → 프론트엔드: liked: true
6. [조건] 이미 좋아요:
   - 백엔드 → DB: 좋아요 삭제
   - 백엔드 → DB: likeCount 감소
   - 백엔드 → 프론트엔드: liked: false
7. 프론트엔드 → 사용자: 좋아요 상태 토글
```

#### 3-2. 게시글 북마크

```
1. 사용자 → 프론트엔드: 북마크 버튼 클릭
2. [조건] 비로그인: 로그인 필요 안내
3. 프론트엔드 → 백엔드: POST /api/v1/posts/{postId}/bookmark
4. 백엔드 → DB: 북마크 여부 조회
5. [조건] 북마크 안함:
   - 백엔드 → DB: 북마크 추가
   - 백엔드 → 프론트엔드: bookmarked: true
6. [조건] 이미 북마크:
   - 백엔드 → DB: 북마크 삭제
   - 백엔드 → 프론트엔드: bookmarked: false
7. 프론트엔드 → 사용자: 북마크 상태 토글
```

#### 3-3. 댓글 좋아요

```
1. 사용자 → 프론트엔드: 댓글 좋아요 버튼 클릭
2. [조건] 비로그인: 로그인 필요 안내
3. 프론트엔드 → 백엔드: POST /api/v1/comments/{commentId}/like
4. 백엔드 → DB: 좋아요 여부 조회
5. [조건] 좋아요 토글 (추가/삭제)
6. 프론트엔드 → 사용자: 좋아요 상태 토글
```

#### 3-4. 내 북마크 목록 조회

```
1. 사용자 → 프론트엔드: 마이페이지 > 북마크
2. 프론트엔드 → 백엔드: GET /api/v1/members/me/bookmarks
3. 백엔드 → DB: 사용자 북마크 목록 조회
4. DB → 백엔드: 북마크 게시글 목록
5. 백엔드 → 프론트엔드: Page<PostResponse>
6. 프론트엔드 → 사용자: 북마크 목록 표시
```

---

## 선택 정보

### 4. 조건부 흐름 (alt/opt)

| 시나리오 | 분기 조건 |
|----------|-----------|
| 좋아요/북마크 | 로그인 여부 |
| 토글 동작 | 현재 상태에 따라 추가/삭제 |

### 5. 기술 정보

| 항목 | 설명 |
|------|------|
| 토글 방식 | 같은 API로 추가/삭제 |
| 카운트 관리 | 좋아요 시 likeCount 동기화 |

### 6. API 엔드포인트

| Method | Path | 설명 | 권한 |
|--------|------|------|------|
| POST | /api/v1/posts/{postId}/like | 게시글 좋아요 토글 | USER |
| POST | /api/v1/posts/{postId}/bookmark | 게시글 북마크 토글 | USER |
| POST | /api/v1/comments/{commentId}/like | 댓글 좋아요 토글 | USER |
| GET | /api/v1/members/me/bookmarks | 내 북마크 목록 | USER |
