# 수료증 관리 (Certificate Management) - PRD

## 문서 정보

| 항목 | 내용 |
|------|------|
| 작성일 | 2026-01-12 |
| 상태 | Draft |
| 버전 | 0.1 |

---

## 1. 개요

### 1.1 배경

> 이 기능이 필요한 이유와 비즈니스 컨텍스트를 설명합니다.

마이페이지에서 수료증 이미지 확인 및 수정 기능

현재 시스템에서 사용자가 후기 작성 시 업로드한 수료증 이미지를:
- 마이페이지에서 확인할 수 없음
- 잘못 업로드한 경우 수정할 방법이 없음

이로 인해 잘못된 이미지 업로드 시 복구가 불가능하며, 관리자 반려 후에도 이미지만 수정할 수 없는 문제가 있음.

### 1.2 목적

> 이 기능이 달성하고자 하는 목표를 명확히 합니다.

- 사용자가 본인이 업로드한 수료증 이미지를 확인할 수 있게 함
- PENDING/REJECTED 상태에서 수료증 이미지를 수정(재업로드)할 수 있게 함
- 잘못된 업로드에 대한 복구 경로 제공

### 1.3 범위

**포함**:
- 마이페이지 "내 후기"에서 수료증 이미지 확인
- 수료증 이미지 수정(재업로드) API
- 상태별 수정 권한 관리

**제외**:
- 새로운 후기 작성 흐름 변경
- 관리자 수료증 검증 프로세스 변경
- OCR 기능 관련 변경

---

## 2. 사용자 스토리

### 2.1 주요 사용자

| 사용자 | 역할 | 설명 |
|--------|------|------|
| USER | 일반 사용자 | 후기를 작성하고 수료증을 업로드한 사용자 |

### 2.2 사용자 스토리

#### US-1: 수료증 이미지 확인
- **사용자**: USER
- **행동**: 마이페이지에서 내가 업로드한 수료증 이미지를 확인한다
- **목적**: 어떤 이미지를 올렸는지 확인하고, 잘못된 경우 인지할 수 있다

#### US-2: 수료증 이미지 수정
- **사용자**: USER
- **행동**: 잘못 업로드한 수료증 이미지를 새로운 이미지로 교체한다
- **목적**: 관리자 반려 후 올바른 수료증으로 재제출하여 후기를 승인받을 수 있다

---

## 3. 기능 요구사항

### 3.1 필수 기능 (Must Have)

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|:--------:|
| FR-1 | 수료증 이미지 조회 | 마이페이지 후기 목록에서 수료증 이미지 URL 제공 | P0 |
| FR-2 | 수료증 상태 표시 | 수료증 승인 상태(PENDING/APPROVED/REJECTED) 표시 | P0 |
| FR-3 | 수료증 이미지 수정 API | PENDING/REJECTED 상태에서 이미지 재업로드 | P0 |
| FR-4 | 상태 초기화 | 이미지 수정 시 수료증 상태를 PENDING으로 초기화 | P0 |

### 3.2 선택 기능 (Nice to Have)

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|:--------:|
| FR-N1 | 이미지 미리보기 | 업로드 전 이미지 미리보기 제공 | P2 |
| FR-N2 | 파일 형식 검증 | 지원하지 않는 파일 형식 사전 차단 | P2 |

---

## 4. 비기능 요구사항

| 항목 | 요구사항 |
|------|----------|
| 보안 | 본인 소유 수료증만 조회/수정 가능 (소유권 검증) |
| 보안 | APPROVED 상태 수료증은 수정 불가 (403 Forbidden) |

---

## 5. 화면 흐름 (Optional)

```
[마이페이지] → [내 후기 탭] → [후기 항목 (수료증 썸네일 표시)]
                                    ↓
                         [이미지 클릭 → 원본 확대]
                                    ↓
                         [수정 버튼 클릭 (PENDING/REJECTED만)]
                                    ↓
                         [이미지 재업로드 → 상태 PENDING으로 변경]
```

---

## 6. 제약사항 및 가정

### 6.1 제약사항

- APPROVED 상태의 수료증은 수정 불가 (이미 검증 완료)
- 이미지 수정 시 기존 이미지는 S3에서 삭제
- 기존 2단계 승인 체계(수료증 → 후기) 유지

### 6.2 가정

- 수료증과 후기는 1:1 관계
- 사용자는 본인 수료증만 접근 가능

---

## 7. 용어 정의

| 용어 | 정의 |
|------|------|
| 수료증 (Certificate) | 강의 수료를 증명하는 이미지 파일 |
| PENDING | 관리자 검토 대기 상태 |
| APPROVED | 관리자 승인 완료 상태 |
| REJECTED | 관리자 반려 상태 |

---

## 버전 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.1 | 2026-01-12 | 초안 작성 |
