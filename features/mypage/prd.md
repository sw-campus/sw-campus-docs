# 마이페이지 (Mypage) - PRD

> Product Requirements Document

## 문서 정보

| 항목 | 내용 |
|------|------|
| 작성일 | 2025-12-14 |
| 상태 | Draft |
| 버전 | 0.3 |

---

## 1. 배경 및 목적

### 1.1 배경

사용자는 자신의 계정 정보, 활동 내역(후기, 강의 등)을 확인하고 관리할 수 있는 공간이 필요합니다. 특히 일반 사용자와 기관 담당자는 플랫폼 내에서의 역할과 활동이 다르므로, 각 역할에 맞는 맞춤형 마이페이지 기능을 제공해야 합니다.

### 1.2 목적

- 사용자 역할(Role)에 따른 맞춤형 대시보드 제공
- 개인 정보 및 활동 내역(후기, 강의, 설문)의 효율적인 관리
- 반려된 콘텐츠(후기, 강의)에 대한 수정 및 재승인 프로세스 지원

---

## 2. 사용자 정의

### 2.1 사용자 유형

| 사용자 유형 | Role | 주요 기능 |
|------------|------|-----------|
| 일반 사용자 | `USER` | 내 정보 수정, 내 후기 관리, 설문조사 관리 |
| 기관 담당자 | `ORGANIZATION` | 내 정보 수정, 강의 관리(생성/수정/조회) |

---

## 3. 기능 요구사항

### 3.1 공통 기능

#### 3.1.1 내 정보 관리

| 구분 | 사용자 스토리 |
|------|-------------|
| US-01 | 사용자는 자신의 기본 정보(닉네임, 전화번호, 주소 등)를 조회할 수 있다 |
| US-02 | 사용자는 자신의 기본 정보를 수정할 수 있다 |
| US-03 | 사용자는 비밀번호를 변경할 수 있다 (기존 Auth API 재사용, 소셜 로그인 사용자 제외) |
| US-04 | 사용자는 닉네임을 언제든지 수정할 수 있다 |
| US-05 | OAuth 사용자는 닉네임이 없을 수 있으나, 한번 생성하면 삭제할 수 없다 |

### 3.2 일반 사용자 (USER) 기능

#### 3.2.1 내 후기 관리

| 구분 | 사용자 스토리 |
|------|-------------|
| US-06 | 사용자는 자신이 작성한 후기 목록을 조회할 수 있다 |
| US-07 | 후기 목록에는 승인 상태(`PENDING`, `APPROVED`, `REJECTED`)가 표시된다 |
| US-08 | 사용자는 `REJECTED`(반려) 상태인 후기만 수정할 수 있다 |
| US-09 | 반려된 후기를 수정하여 저장하면 승인 상태가 `PENDING`(대기)으로 변경된다 |
| US-10 | 사용자는 후기를 삭제할 수 없다 (삭제 권한은 관리자만 보유) |

#### 3.2.2 설문조사 관리

| 구분 | 사용자 스토리 |
|------|-------------|
| US-11 | 사용자는 자신의 설문조사 내용을 조회할 수 있다 |
| US-12 | 설문조사 데이터가 없는 경우(초기 상태), 빈 폼 또는 안내 메시지를 제공한다 |
| US-13 | 사용자는 설문조사 내용을 수정(또는 신규 작성)할 수 있다 |
| US-14 | 설문조사 데이터는 전체 항목이 Optional(Nullable)이다 |
| US-15 | 사용자는 마이페이지에서 설문조사 완료 여부를 확인할 수 있다 (AI 추천 기능 이용 조건) |

### 3.3 기관 담당자 (ORGANIZATION) 기능

#### 3.3.1 기관 정보 관리

| 구분 | 사용자 스토리 |
|------|-------------|
| US-16 | 기관 담당자는 자신의 기관 정보(기관명, 대표자명, 연락처 등)를 조회할 수 있다 |
| US-17 | 기관 담당자는 자신의 기관 정보를 수정할 수 있다 |

> **Note**: 기관 정보 수정에 대한 관리자 검토 프로세스는 추후 고도화 시 검토

#### 3.3.2 강의 관리

| 구분 | 사용자 스토리 |
|------|-------------|
| US-18 | 기관 담당자는 자신이 등록한 강의 목록을 조회할 수 있다 |
| US-19 | 강의 목록에는 승인 상태(`PENDING`, `APPROVED`, `REJECTED`)가 표시된다 |
| US-20 | 기관 담당자는 새로운 강의를 등록할 수 있다 (기존 강의 등록 API `POST /api/v1/lectures` 재사용) |
| US-21 | 기관 담당자는 `REJECTED`(반려) 상태인 강의만 수정할 수 있다 |
| US-22 | 반려된 강의를 수정하여 저장하면 승인 상태가 `PENDING`(대기)으로 변경된다 |
| US-23 | 기관 담당자는 강의를 삭제할 수 없다 (삭제 권한은 관리자만 보유) |

---

## 4. 정책 및 제약사항

### 4.1 수정 권한 정책

- **후기/강의 수정**: 이미 승인된(`APPROVED`) 콘텐츠나 대기 중(`PENDING`)인 콘텐츠는 수정이 불가능하며, 오직 반려(`REJECTED`)된 경우에만 수정이 가능하다.
- **후기/강의 삭제**: 사용자는 삭제 권한이 없으며, 삭제는 관리자만 수행할 수 있다.

### 4.2 닉네임 정책

- 닉네임은 언제든지 수정 가능하다 (횟수 제한 없음).
- OAuth 사용자는 초기에 닉네임이 없을 수 있으나, 한번 생성하면 삭제할 수 없다.

### 4.3 설문조사 데이터

- 설문조사는 가입 시 필수가 아니므로 데이터가 존재하지 않을 수 있음 (`null` 처리 필요)
- 설문조사 수정 시 기존 데이터가 있으면 업데이트, 없으면 생성(`INSERT`) 처리
- 설문조사 완료 여부는 AI 강의 추천 기능 이용 조건으로 마이페이지에서 표시

### 4.4 기관 정보 수정

- 현재 버전에서는 기관 담당자가 기관 정보를 자유롭게 수정 가능
- 추후 고도화 시 관리자 검토 프로세스 추가 검토
