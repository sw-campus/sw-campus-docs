# 인증 (Auth) - Development Plan

> 개발 계획서

## 문서 정보

| 항목 | 내용 |
|------|------|
| 작성일 | 2025-12-05 |
| 상태 | Active |
| 버전 | 0.1 |
| PRD | [prd.md](../prd.md) |
| Tech Spec | [tech-spec.md](../tech-spec.md) |

---

## 1. 개요

### 1.1 목표

Auth 기능(회원가입, 로그인, 로그아웃, 토큰 관리, 비밀번호 변경/찾기, OAuth)을 4일 내에 TDD 방식으로 구현합니다.

### 1.2 범위

**포함:**
- US-01 ~ US-20: 이메일 인증, 회원가입, 로그인, 토큰, 비밀번호
- 소셜 로그인 (Google, GitHub)

**제외:**
- US-21 ~ US-23: Admin 기능 (별도 개발자 담당)

### 1.3 일정

| 항목 | 내용 |
|------|------|
| 시작일 | 2025-12-05 |
| 종료일 | 2025-12-08 |
| 총 기간 | 4일 |
| 예상 작업 시간 | 약 21.5시간 |

---

## 2. Phase 목록

| Phase | 이름 | 예상 시간 | 관련 US |
|:-----:|------|:---------:|---------|
| 01 | [프로젝트 설정](./phase01-setup.md) | 1h | - |
| 02 | [Member 도메인](./phase02-member.md) | 2h | - |
| 03 | [Security + JWT](./phase03-security.md) | 2h | US-15~17 |
| 04 | [이메일 인증](./phase04-email.md) | 2.5h | US-01~05 |
| 05 | [회원가입 - 일반](./phase05-signup.md) | 1.5h | US-06~08 |
| 06 | [회원가입 - 교육제공자](./phase06-signup-provider.md) | 1.5h | US-09~10 |
| 07 | [로그인/로그아웃](./phase07-login.md) | 2h | US-11~14 |
| 08 | [토큰 갱신](./phase08-token.md) | 1h | US-15~17 |
| 09 | [비밀번호 관리](./phase09-password.md) | 2h | US-18~20 |
| 10 | [OAuth](./phase10-oauth.md) | 4h | 소셜 로그인 |
| 11 | [통합 테스트](./phase11-integration.md) | 2h | 전체 |

---

## 3. 진행 현황

```
Phase 01 □□□□□□□□□□ 0%
Phase 02 □□□□□□□□□□ 0%
Phase 03 □□□□□□□□□□ 0%
Phase 04 □□□□□□□□□□ 0%
Phase 05 □□□□□□□□□□ 0%
Phase 06 □□□□□□□□□□ 0%
Phase 07 □□□□□□□□□□ 0%
Phase 08 □□□□□□□□□□ 0%
Phase 09 □□□□□□□□□□ 0%
Phase 10 □□□□□□□□□□ 0%
Phase 11 □□□□□□□□□□ 0%
──────────────────────
Total    □□□□□□□□□□ 0%
```

---

## 4. 개발 전략

### 4.1 TDD 프로세스

```
Red → Green → Refactor

1. Red: 실패하는 테스트 작성
2. Green: 테스트를 통과하는 최소 코드 작성
3. Refactor: 코드 개선 (테스트는 계속 통과)
```

### 4.2 AI 협업 전략

| 단계 | AI 역할 | 사람 역할 |
|------|---------|-----------|
| Red | 테스트 코드 생성 | 요구사항 검토 |
| Green | 구현 코드 생성 | 테스트 실행 및 검증 |
| Refactor | 개선 제안 | 최종 결정 및 적용 |

### 4.3 커밋 전략

- Phase 단위로 커밋
- 커밋 메시지: `feat(auth): Phase XX - 설명`
- 예: `feat(auth): Phase 01 - 프로젝트 설정 완료`

---

## 5. 테스트 전략

### 5.1 커버리지 목표

| 구분 | 목표 |
|------|------|
| 전체 | 90% |
| Domain (Service) | 95% |
| API (Controller) | 85% |
| Infra (Repository) | 80% |

### 5.2 테스트 범위

**단위 테스트:**
- Service 로직
- TokenProvider
- 유효성 검증

**통합 테스트:**
- API 엔드포인트 (MockMvc)
- Repository (TestContainers 또는 H2)

**제외:**
- 외부 연동 (SMTP, OAuth Provider) → Mock 처리

---

## 6. 기술적 의사결정

| 결정 사항 | 선택 | 이유 |
|-----------|------|------|
| 테스트 DB | H2 (In-Memory) | 빠른 테스트, 설정 간편 |
| 이메일 발송 | SMTP (추후 SES) | 초기 개발 단순화 |
| 파일 저장 | AWS S3 | 요구사항 |
| JWT 저장 | HttpOnly Cookie | 보안 (XSS 방지) |

---

## 7. 리스크 관리

| 리스크 | 영향 | 대응 방안 |
|--------|------|-----------|
| OAuth 연동 지연 | 높음 | 기본 Auth 먼저 완료, OAuth는 마지막 |
| S3 연동 이슈 | 중간 | LocalStack 또는 Mock으로 대체 가능 |
| 테스트 커버리지 미달 | 낮음 | 핵심 로직 우선, 나머지는 후속 보완 |

---

## 8. 성공 기준

- [ ] 모든 Phase 완료
- [ ] 테스트 커버리지 90% 이상
- [ ] 모든 API 엔드포인트 동작 확인
- [ ] PRD의 US-01~20 충족
- [ ] 코드 리뷰 완료

---

## 9. 관련 문서

- [PRD](../prd.md)
- [Tech Spec](../tech-spec.md)
- [Implementation Report](../report.md)

---

## 10. 버전 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.1 | 2025-12-05 | 초안 작성 |
