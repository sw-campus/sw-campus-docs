# 설문조사 (Survey) - PRD

> Product Requirements Document

## 문서 정보

| 항목 | 내용 |
|------|------|
| 작성일 | 2025-12-12 |
| 상태 | Draft |
| 버전 | 0.1 |

---

## 1. 배경 및 목적

### 1.1 배경

SW Campus는 사용자에게 맞춤형 강의 추천 서비스를 제공합니다. LLM(Gemini 3.0) 기반 추천 기능의 핵심 데이터로 사용자의 학습 배경, 희망 직무, 자격증 등의 정보가 필요합니다.

### 1.2 목적

- 사용자 맞춤형 강의 추천을 위한 기초 데이터 수집
- LLM 프롬프트에 전달할 사용자 컨텍스트 확보
- 사용자 학습 배경 및 목표 파악

---

## 2. 사용자 정의

### 2.1 사용자 유형 및 권한

| 사용자 유형 | Role | 설문 작성 | 설문 조회 | 설문 수정 |
|------------|------|:--------:|:--------:|:--------:|
| 일반 사용자 | `USER` | ✅ | ✅ (본인만) | ✅ (본인만) |
| 기관 담당자 | `ORGANIZATION` | ❌ | ❌ | ❌ |
| 관리자 | `ADMIN` | ❌ | ✅ (전체) | ❌ |

### 2.2 설문조사 흐름

```
[USER]
회원가입 → 로그인 → 설문조사 작성 → LLM 추천 기능 이용 가능
                         ↓
                    설문조사 수정 (선택)
```

> **Note**: 설문조사를 작성하지 않으면 LLM 추천 기능을 이용할 수 없습니다.

---

## 3. 기능 요구사항

### 3.1 설문조사 작성

| 구분 | 사용자 스토리 |
|------|-------------|
| US-01 | USER는 설문조사를 작성할 수 있다 |
| US-02 | USER는 설문조사 항목 중 일부만 입력해도 저장할 수 있다 (전체 nullable) |
| US-03 | USER는 이미 설문조사를 작성한 경우 새로 작성할 수 없다 (1인 1설문) |

### 3.2 설문조사 조회

| 구분 | 사용자 스토리 |
|------|-------------|
| US-04 | USER는 본인의 설문조사를 조회할 수 있다 |
| US-05 | ADMIN은 특정 사용자의 설문조사를 조회할 수 있다 |
| US-06 | ADMIN은 전체 사용자의 설문조사 목록을 조회할 수 있다 |

### 3.3 설문조사 수정

| 구분 | 사용자 스토리 |
|------|-------------|
| US-07 | USER는 본인의 설문조사를 수정할 수 있다 |
| US-08 | 설문조사 수정 시 기존 데이터를 덮어쓴다 (버전 관리 없음) |

### 3.4 LLM 추천 연동

| 구분 | 사용자 스토리 |
|------|-------------|
| US-09 | USER는 설문조사를 작성해야 LLM 강의 추천 기능을 이용할 수 있다 |
| US-10 | LLM 추천 시 설문조사 데이터가 프롬프트에 포함되어 전달된다 |

---

## 4. 설문 항목 정의

### 4.1 설문 항목

| 항목 | 필드명 | 타입 | 길이 | Nullable | 설명 |
|------|--------|------|------|:--------:|------|
| 전공 | major | String | 100 | ✅ | 자유 입력 |
| 부트캠프 수료 경험 | bootcampCompleted | Boolean | - | ✅ | true/false/null |
| 희망직무 | wantedJobs | String | 255 | ✅ | 자유 입력 (복수 가능) |
| 자격증 | licenses | String | 500 | ✅ | 자유 입력 (복수 가능) |
| 내일배움카드 여부 | hasGovCard | Boolean | - | ✅ | true/false/null |
| 자비부담 여유 | affordableAmount | BigDecimal | - | ✅ | 금액 (원) |

### 4.2 입력 예시

```json
{
  "major": "컴퓨터공학",
  "bootcampCompleted": true,
  "wantedJobs": "백엔드 개발자, 데이터 엔지니어",
  "licenses": "정보처리기사, SQLD, AWS SAA",
  "hasGovCard": true,
  "affordableAmount": 500000
}
```

### 4.3 데이터 저장 방식

- **복수 입력 항목 (희망직무, 자격증)**: 사용자가 입력한 그대로 VARCHAR에 저장
- **구분자 없음**: LLM 프롬프트에 그대로 전달하므로 별도 파싱 불필요
- **질문 텍스트**: 프론트엔드에서 관리 (백엔드는 답변만 저장)

---

## 5. 비기능 요구사항

### 5.1 보안

| 구분 | 요구사항 |
|------|----------|
| NFR-01 | 설문조사 API는 인증된 사용자만 접근 가능해야 한다 |
| NFR-02 | USER는 본인의 설문조사만 조회/수정할 수 있다 |
| NFR-03 | ADMIN만 타 사용자의 설문조사를 조회할 수 있다 |

### 5.2 데이터

| 구분 | 요구사항 |
|------|----------|
| NFR-04 | 설문조사는 회원당 1개만 존재한다 (1:1 관계) |
| NFR-05 | 회원 탈퇴 시 설문조사 데이터도 함께 삭제된다 |
| NFR-06 | 최신 응답만 유지하며 이전 버전은 저장하지 않는다 |

### 5.3 성능

| 구분 | 요구사항 |
|------|----------|
| NFR-07 | 설문조사 조회 응답 시간은 200ms 이내여야 한다 |

---

## 6. 범위 (Scope)

### 6.1 포함 (In Scope)

- 설문조사 작성 (Create)
- 설문조사 조회 (Read)
- 설문조사 수정 (Update)
- 권한 기반 접근 제어

### 6.2 제외 (Out of Scope)

- 설문조사 삭제 (회원 탈퇴 시 자동 삭제)
- 설문조사 이력/버전 관리
- 설문 항목 동적 관리 (DB에서 질문 관리)
- 설문 통계/분석 기능

---

## 7. 데이터 모델

### 7.1 테이블 구조

```
member_surveys
├─ user_id: BIGINT (PK, FK → members.user_id)
├─ major: VARCHAR(100)
├─ bootcamp_completed: BOOLEAN
├─ wanted_jobs: VARCHAR(255)
├─ licenses: VARCHAR(500)
├─ has_gov_card: BOOLEAN
├─ affordable_amount: NUMERIC
├─ created_at: TIMESTAMP
└─ updated_at: TIMESTAMP
```

### 7.2 관계

```
members (1) ──────── (0..1) member_surveys
          user_id ◄──────── user_id (PK, FK)
```

- Member와 1:1 관계 (선택적)
- user_id가 PK이자 FK

---

## 8. 용어 정의

| 용어 | 설명 |
|------|------|
| 설문조사 (Survey) | 사용자의 학습 배경 및 목표 정보를 수집하는 폼 |
| 내일배움카드 | 고용노동부 국비지원 훈련 카드 |
| 자비부담 여유 | 교육비 중 본인이 부담 가능한 금액 |

---

## 9. 참고 자료

- [설문조사 DB 설계 회의 자료](../../meeting-logs/survey-db-design-discussion.md)
