# 리뷰 블라인드 (Review Blind) - PRD

> Product Requirements Document

## 문서 정보

| 항목 | 내용 |
|------|------|
| 작성일 | 2026-01-22 |
| 상태 | Draft |
| 버전 | 0.1 |

---

## 1. 배경 및 목적

### 1.1 배경

SW Campus는 소프트웨어 교육 강의를 비교하고 리뷰할 수 있는 플랫폼입니다. 현재 승인된 모든 리뷰가 누구에게나 노출되고 있어, **회원 가입 및 참여 유도가 부족**한 상황입니다.

리뷰 블라인드 기능을 도입하여 **회원 참여(후기 작성, 설문조사)를 유도**하고, 플랫폼 가치를 높이고자 합니다.

### 1.2 목적

- 비회원/미해제 회원에게 리뷰 접근 제한으로 **회원 가입 유도**
- 후기 작성 및 설문조사 완료를 **블라인드 해제 조건**으로 설정하여 **회원 참여 증가**
- 플랫폼 내 양질의 후기 및 설문 데이터 확보

---

## 2. 사용자 정의

### 2.1 사용자 유형

| 사용자 유형 | 블라인드 상태 | 리뷰 조회 범위 |
|------------|-------------|---------------|
| 비회원 | 블라인드 | 각 강의당 리뷰 1개만 |
| 미해제 회원 | 블라인드 | 각 강의당 리뷰 1개만 |
| 해제 회원 | 해제 | 모든 강의의 모든 리뷰 |

### 2.2 블라인드 해제 조건

```
블라인드 해제 = 조건1 OR 조건2

조건1: 설문조사 100% 완료
  → MemberSurvey.completedAt != null

조건2: 승인된 리뷰 보유
  → 본인이 작성한 리뷰 중 1개 이상 APPROVED 상태
```

> **왜 OR 조건인가?**
> - 부트캠프 미참여자: 리뷰 작성 불가 (수료증 없음) → **설문조사로만 해제 가능**
> - 부트캠프 참여자: 리뷰 작성 가능 → **리뷰 승인으로 해제 가능**
> - 서비스에서 부트캠프 참여 여부를 알 수 없으므로 **둘 중 하나**만 충족하면 해제

---

## 3. 기능 요구사항

### 3.1 리뷰 조회 블라인드

#### 3.1.1 강의별 리뷰 목록 조회

| 구분 | 사용자 스토리 |
|------|-------------|
| US-01 | 비회원/미해제 회원은 강의 상세 페이지에서 리뷰를 1개만 볼 수 있다 |
| US-02 | 해제 회원은 강의 상세 페이지에서 모든 리뷰를 볼 수 있다 |
| US-03 | 블라인드 상태에서 "더 많은 리뷰 보기" 영역에 해제 조건 안내가 표시된다 |
| US-04 | 총 리뷰 개수(`totalCount`)는 블라인드 상태와 무관하게 실제 값으로 표시된다 |

#### 3.1.2 블라인드 상태 확인

| 구분 | 사용자 스토리 |
|------|-------------|
| US-05 | 회원은 자신의 블라인드 해제 상태를 확인할 수 있다 |
| US-06 | 블라인드 상태 조회 시 해제 여부, 리뷰 작성 여부, 설문 완료 여부가 표시된다 |
| US-07 | 블라인드 미해제 시 어떤 조건이 충족되지 않았는지 안내한다 |

### 3.2 블라인드 오버레이 UI

| 구분 | 사용자 스토리 |
|------|-------------|
| US-08 | 블라인드된 리뷰 영역에 오버레이가 표시된다 |
| US-09 | 오버레이에 해제 조건 안내 문구가 포함된다 |
| US-10 | 비회원은 "로그인하고 리뷰 더 보기" 버튼이 표시된다 |
| US-11 | 미해제 회원은 "리뷰 작성하기" 또는 "설문 완료하기" 버튼이 조건에 따라 표시된다 |

---

## 4. 상태 정의

### 4.1 블라인드 상태

| 상태 | 설명 | 리뷰 조회 범위 |
|------|------|---------------|
| `isUnblinded: true` | 블라인드 해제됨 | 모든 리뷰 |
| `isUnblinded: false` | 블라인드 상태 | 강의당 1개 |

### 4.2 해제 조건 상태

| 필드 | 설명 |
|------|------|
| `hasApprovedReview` | 승인된 리뷰 보유 여부 |
| `hasSurveyCompleted` | 설문조사 완료 여부 |

---

## 5. 비기능 요구사항

### 5.1 보안

| 구분 | 요구사항 |
|------|----------|
| NFR-01 | 블라인드 상태 확인 API는 인증된 사용자만 접근 가능 |
| NFR-02 | 서버에서 블라인드 필터링 처리 (클라이언트 우회 불가) |

### 5.2 성능

| 구분 | 요구사항 |
|------|----------|
| NFR-03 | 블라인드 상태 확인은 단일 쿼리로 처리 |
| NFR-04 | 리뷰 목록 조회 시 블라인드 필터링 추가 지연 50ms 이내 |

### 5.3 사용자 경험

| 구분 | 요구사항 |
|------|----------|
| NFR-05 | 블라인드 해제 조건 안내는 명확하고 이해하기 쉽게 표시 |
| NFR-06 | 해제 조건 완료 시 즉시 반영 (새로고침 없이) |

---

## 6. 범위 (Scope)

### 6.1 포함 (In Scope)

- [x] 강의별 리뷰 목록 블라인드 처리
- [x] 블라인드 해제 조건 검증 로직
- [x] 블라인드 상태 조회 API
- [x] 블라인드 오버레이 UI 컴포넌트
- [x] 총 리뷰 개수 표시 (블라인드 무관)

### 6.2 제외 (Out of Scope)

- [ ] 기관별 리뷰 목록 블라인드 (향후 확장)
- [ ] 관리자 대시보드 블라인드 통계
- [ ] 블라인드 해제 조건 커스터마이징
- [ ] 리뷰 상세 조회 블라인드 (개별 리뷰 URL 접근 시)

---

## 7. 기존 기능과의 관계

### 7.1 `Review.blurred` 필드 vs 리뷰 블라인드

| 개념 | 용도 | 적용 단위 | 제어 주체 |
|-----|------|----------|----------|
| `Review.blurred` (기존) | 관리자가 특정 리뷰 내용 숨김 | 개별 리뷰 | 관리자 |
| `isUnblinded()` (신규) | 사용자별 전체 리뷰 접근 제한 | 사용자 | 시스템 |

**두 개념은 독립적으로 동작합니다.**

- 관리자가 블러 처리한 리뷰(`blurred: true`)는 해제 회원에게도 블러 상태로 표시
- 미해제 회원은 블러되지 않은 리뷰도 1개만 볼 수 있음

---

## 8. API 변경 사항

### 8.1 기존 API 수정

| 엔드포인트 | 변경 내용 |
|-----------|----------|
| `GET /api/v1/lectures/{lectureId}/reviews` | 블라인드 필터링 적용, 응답에 `totalCount`, `isUnblinded` 추가 |

### 8.2 신규 API

| 엔드포인트 | 설명 |
|-----------|------|
| `GET /api/v1/reviews/blind-status` | 현재 사용자의 블라인드 해제 상태 조회 |

---

## 9. 응답 형식

### 9.1 리뷰 목록 응답 (변경)

```json
{
  "reviews": [...],
  "totalCount": 15,
  "isUnblinded": false
}
```

### 9.2 블라인드 상태 응답 (신규)

```json
{
  "isUnblinded": false,
  "hasApprovedReview": false,
  "hasSurveyCompleted": false
}
```

> `isUnblinded = hasApprovedReview OR hasSurveyCompleted`

---

## 10. 관련 문서

- [Review PRD](../review/prd.md)
- [Survey PRD](../survey/prd.md)

---

## 11. 버전 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 0.1 | 2026-01-22 | 초안 작성 |
