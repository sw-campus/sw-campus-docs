## 필수 정보

### 1. 참여자 (Participants/Actors)
| 참여자 | 설명 | 기술 스택 |
|--------|------|-----------|
| 관리자 (Admin) | 시스템 관리자 | 브라우저 |
| 공급자 (Provider) | 강의 등록자 | 브라우저 |
| 관리자 프론트엔드 (Admin Frontend) | 관리자 웹 클라이언트 | Next.js + Nginx |
| 프론트엔드 (Frontend) | 일반 웹 클라이언트 | Next.js + Nginx |
| 백엔드 (Backend) | API 서버 | Spring + Spring Security |
| S3 | 이미지 저장소 | AWS S3 |
| DB (Database) | 데이터 저장소 | - |

### 2. 시나리오/흐름 설명
- Provider 강의 등록 프로세스
- 관리자 강의 등록 프로세스
- 승인 대기 강의 목록 조회 프로세스
- 강의 상세 정보 조회 프로세스
- 강의 승인 프로세스

### 3. 메시지 흐름 순서

#### 3-1. Provider 강의 등록 흐름
```
1. 공급자 → 프론트엔드: 강의 등록 페이지 접속
2. 프론트엔드 → 백엔드: Provider 승인 상태 확인 (GET /api/providers/me/status)
3. 백엔드 → DB: Provider 승인 상태 조회
4. DB → 백엔드: 승인 상태 반환
5. [조건] 승인되지 않은 경우 (PENDING / REJECTED):
   - 백엔드 → 프론트엔드: 403 Forbidden (강의 등록 권한 없음)
   - 프론트엔드 → 공급자: 에러 메시지 표시 ("관리자 승인 후 이용 가능합니다")
6. [조건] 승인된 경우 (APPROVED):
   - 백엔드 → 프론트엔드: 200 OK
   - 프론트엔드 → 공급자: 강의 등록 폼 표시
   - 공급자 → 프론트엔드: 강의 정보 입력 및 제출 (강의명, 카테고리, 가격, 썸네일 등)
   - 프론트엔드 → 백엔드: 강의 등록 API 요청 (POST /api/lectures, 이미지 포함)
   - 백엔드 → S3: 강의 썸네일 이미지 업로드
   - S3 → 백엔드: 이미지 URL 반환
   - 백엔드 → DB: 강의 정보 저장 (approvalStatus: PENDING)
   - DB → 백엔드: 저장 완료
   - 백엔드 → 프론트엔드: 201 Created (강의 등록 성공, 승인 대기 상태)
   - 프론트엔드 → 공급자: 등록 완료 메시지 표시 ("관리자 승인 후 노출됩니다")
```

#### 3-2. 관리자 강의 등록 흐름
```
1. 관리자 → 관리자 프론트엔드: 강의 등록 페이지 접속
2. 관리자 프론트엔드 → 관리자: 강의 등록 폼 표시
3. 관리자 → 관리자 프론트엔드: 강의 정보 입력 및 제출 (강의명, 카테고리, 가격, 썸네일 등)
4. 관리자 프론트엔드 → 백엔드: 강의 등록 API 요청 (POST /api/admin/lectures, 이미지 포함)
5. 백엔드 → S3: 강의 썸네일 이미지 업로드
6. S3 → 백엔드: 이미지 URL 반환
7. 백엔드 → DB: 강의 정보 저장 (approvalStatus: APPROVED, 관리자 등록은 즉시 승인)
8. DB → 백엔드: 저장 완료
9. 백엔드 → 관리자 프론트엔드: 201 Created (강의 등록 성공)
10. 관리자 프론트엔드 → 관리자: 등록 완료 메시지 표시
```

#### 3-3. 승인 대기 강의 목록 조회 흐름
```
1. 관리자 → 관리자 프론트엔드: 강의 관리 메뉴 클릭
2. 관리자 프론트엔드 → 백엔드: 승인 대기 강의 목록 조회 (GET /api/admin/lectures?status=PENDING)
3. 백엔드 → DB: 승인 대기 상태 강의 목록 조회
4. DB → 백엔드: 강의 목록 반환
5. 백엔드 → 관리자 프론트엔드: 200 OK (강의 목록 데이터)
6. 관리자 프론트엔드 → 관리자: 승인 대기 강의 목록 표시
```

#### 3-4. 강의 상세 정보 조회 흐름
```
1. 관리자 → 관리자 프론트엔드: 강의 상세보기 클릭
2. 관리자 프론트엔드 → 백엔드: 강의 상세 조회 (GET /api/admin/lectures/{lectureId})
3. 백엔드 → DB: 강의 정보 조회
4. DB → 백엔드: 강의 정보 반환 (등록자 정보, 썸네일 URL 포함)
5. 백엔드 → 관리자 프론트엔드: 200 OK (강의 상세 데이터)
6. 관리자 프론트엔드 → S3: 강의 썸네일 이미지 요청
7. S3 → 관리자 프론트엔드: 이미지 반환
8. 관리자 프론트엔드 → 관리자: 강의 상세 정보 표시
```

#### 3-5. 강의 승인 흐름
```
1. 관리자 → 관리자 프론트엔드: "승인" 버튼 클릭
2. 관리자 프론트엔드 → 백엔드: 강의 승인 API 요청 (PATCH /api/admin/lectures/{lectureId}/approve)
3. 백엔드 → DB: 강의 승인 상태 업데이트 (approvalStatus: APPROVED)
4. DB → 백엔드: 업데이트 완료
5. 백엔드 → 관리자 프론트엔드: 200 OK (승인 완료)
6. 관리자 프론트엔드 → 관리자: 승인 완료 메시지 표시, 목록 새로고침
```

---

## 선택 정보 (더 정교한 다이어그램을 위해)

### 4. 조건부 흐름 (alt/opt)
| 시나리오 | 분기 조건 |
|----------|-----------|
| Provider 강의 등록 | Provider 승인됨 / 승인 안됨 |
| 관리자 강의 등록 | 없음 (단일 흐름, 즉시 승인) |
| 강의 승인 | 없음 (단일 흐름) |

### 5. 반복 (loop)
- 없음

### 6. 병렬 처리 (par)
- 없음

### 7. 비동기 호출
- 모두 동기 호출

### 8. 노트/주석
- Provider는 관리자 승인 후에만 강의 등록 가능
- 관리자가 등록한 강의는 즉시 APPROVED 상태
- Provider가 등록한 강의는 PENDING 상태로 시작
- 승인된 강의만 일반 사용자에게 노출
- 반려 기능은 추후 구현 예정

---

## 추가 기술 정보

### 인증/인가 방식
| 항목 | 설명 |
|------|------|
| Provider 강의 등록 | 로그인 필수 + Provider 승인 상태 필수 |
| 관리자 강의 등록 | 관리자 로그인 필수 |
| 강의 승인 | 관리자 로그인 필수 |

### 강의 승인 상태
| 상태 | 설명 | 노출 여부 |
|------|------|----------|
| PENDING | 승인 대기 | 미노출 |
| APPROVED | 승인 완료 | 노출 |

### API 엔드포인트
| 기능 | Method | Endpoint | 설명 |
|------|--------|----------|------|
| Provider 상태 확인 | GET | /api/providers/me/status | Provider 승인 상태 조회 |
| Provider 강의 등록 | POST | /api/lectures | 강의 등록 (PENDING 상태) |
| 관리자 강의 등록 | POST | /api/admin/lectures | 강의 등록 (즉시 APPROVED) |
| 강의 목록 조회 | GET | /api/admin/lectures | 상태별 필터링 가능 |
| 강의 상세 조회 | GET | /api/admin/lectures/{lectureId} | 등록자 정보 포함 |
| 강의 승인 | PATCH | /api/admin/lectures/{lectureId}/approve | 승인 처리 |

### 에러 케이스
| HTTP Status | 설명 | 발생 조건 |
|-------------|------|-----------|
| 401 Unauthorized | 인증 필요 | 비로그인 상태 |
| 403 Forbidden | 권한 없음 | Provider 미승인 또는 관리자 아님 |
| 404 Not Found | 강의 없음 | 존재하지 않는 lectureId |
